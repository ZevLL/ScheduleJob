!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();e.exports=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._repeat=t.repeat||!1,this._interval=t.interval,this._date=t.date,this._callback=i,this._id=void 0,this._actived=!1,this._execDateRecords=[],this._repeat?this._date&&this._interval?this._type=this._type=this.jobTypes.REPEAT_AT_TIME:this._type=this.jobTypes.REPEAT:this._type=this.jobTypes.ONE_TIME}return n(e,[{key:"start",value:function(){var e=this,t=function(){e._callback();var t=new Date;e._execDateRecords.push(t)};if(this._actived=!0,this._type==this.jobTypes.REPEAT_AT_TIME){var i=new Date,n=this._date.getTime()-i.getTime();if(this._date.getTime()<i.getTime())return void console.warn("date over due");setTimeout(function(){e._id=setInterval(t,e._interval),t()},n)}else if(this._type==this.jobTypes.REPEAT)this._id=setInterval(t,this._interval),t();else if(this._type==this.jobTypes.ONE_TIME)if(this._date&&this._interval)console.error("one time job can only have one of date and interval ");else if(this._date){var r=new Date,s=this._date.getTime()-r.getTime();this._id=setTimeout(t,s)}else this._interval&&(this._id=setTimeout(t,this._interval))}},{key:"terminate",value:function(){this._type==this.jobTypes.ONE_TIME?this._actived&&this._id&&(clearTimeout(this._id),this._actived=!1):(this._type==this.jobTypes.REPEAT||this.jobTypes.REPEAT_AT_TIME)&&this._actived&&this._id&&(clearInterval(this._id),this._actived=!1)}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"actived",get:function(){return this._actived}},{key:"jobTypes",get:function(){return{ONE_TIME:0,REPEAT:1,REPEAT_AT_TIME:2}}},{key:"interval",get:function(){return this._interval}},{key:"nextExec",get:function(){var e=this._execDateRecords.length,t=this._execDateRecords[e-1];return new Date(t.getTime()+this._interval)}},{key:"lastExec",get:function(){return this._execDateRecords[this._execDateRecords.length-2]}},{key:"currentExec",get:function(){return this._execDateRecords[this._execDateRecords.length-1]}}]),e}()}]);